<!-- Profile Section -->
<section class="profile-section bg-light py-5">
  <div class="container">
    <div class="row align-items-center mb-5">
      <!-- Avatar & Info -->
      <div class="col-lg-3 text-center text-lg-start">
        <img [src]="user.avatar" alt="Avatar"
             class="rounded-circle mb-3" width="120" height="120">
      </div>
      <div class="col-lg-6 mt-3 mt-lg-0">
        <h2 class="mb-1 fw-bold">{{ user.name }}</h2>
        <p class="text-muted mb-2">
          <i class="bi bi-envelope-fill me-2"></i>{{ user.email }}
        </p>
        <p class="text-muted mb-2">
          <i class="bi bi-telephone-fill me-2"></i>{{ user.phone }}
        </p>
        <p class="text-muted mb-0">
          <i class="bi bi-geo-alt-fill me-2"></i>{{ user.location }}
        </p>
        <div class="mt-2">
          <span *ngIf="user.isPremium" class="badge bg-primary me-2">Premium Member</span>
          <span *ngIf="user.isVerified" class="badge bg-success">Verified</span>
        </div>
      </div>
      <div class="col-lg-3 text-center text-lg-end mt-3 mt-lg-0">
        <button class="btn btn-primary mb-2 w-100 w-lg-auto" (click)="onEditProfile()">
          <i class="bi bi-pencil-fill me-2"></i>Edit Profile
        </button>
        <button class="btn btn-outline-secondary w-100 w-lg-auto" (click)="onSettings()">
          <i class="bi bi-gear-fill me-2"></i>Settings
        </button>
      </div>
    </div>

    <div class="row g-4">
      <!-- Sidebar Stats & About -->
      <div class="col-lg-4">

        <!-- Statistik Card -->
        <div class="card shadow-sm border-0 mb-4">
          <div class="card-header bg-white border-0 py-3">
            <h5 class="mb-0 fw-bold">
              <i class="bi bi-bar-chart-fill text-primary me-2"></i>Statistik
            </h5>
          </div>
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3 pb-3 border-bottom">
              <div>
                <i class="bi bi-house-fill text-primary fs-4 me-2"></i>
                <span class="text-muted">Properti Disewa</span>
              </div>
              <h4 class="mb-0 fw-bold text-primary">{{ stats.properties }}</h4>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3 pb-3 border-bottom">
              <div>
                <i class="bi bi-heart-fill text-primary fs-4 me-2"></i>
                <span class="text-muted">Favorit</span>
              </div>
              <h4 class="mb-0 fw-bold text-primary">{{ stats.favorites }}</h4>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3 pb-3 border-bottom">
              <div>
                <i class="bi bi-star-fill text-primary fs-4 me-2"></i>
                <span class="text-muted">Rating</span>
              </div>
              <h4 class="mb-0 fw-bold text-primary">{{ stats.rating }}</h4>
            </div>
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <i class="bi bi-calendar-event text-primary fs-4 me-2"></i>
                <span class="text-muted">Member Sejak</span>
              </div>
              <h6 class="mb-0">{{ user.memberSince }}</h6>
            </div>
          </div>
        </div>

        <!-- About Card -->
        <div class="card shadow-sm border-0 mb-4">
          <div class="card-header bg-white border-0 py-3">
            <h5 class="mb-0 fw-bold">
              <i class="bi bi-person-fill text-primary me-2"></i>Tentang
            </h5>
          </div>
          <div class="card-body">
            <p class="text-muted mb-3">{{ user.bio }}</p>
            <div class="mb-2">
              <i class="bi bi-briefcase-fill text-primary me-2"></i>
              <strong>Pekerjaan:</strong> {{ user.job }}
            </div>
            <div class="mb-2">
              <i class="bi bi-calendar-fill text-primary me-2"></i>
              <strong>Tanggal Lahir:</strong> {{ user.birthdate }}
            </div>
            <div>
              <i class="bi bi-heart-fill text-primary me-2"></i>
              <strong>Status:</strong> {{ user.status }}
            </div>
          </div>
        </div>

        <!-- Social Media Card -->
        <div class="card shadow-sm border-0">
          <div class="card-header bg-white border-0 py-3">
            <h5 class="mb-0 fw-bold">
              <i class="bi bi-share-fill text-primary me-2"></i>Sosial Media
            </h5>
          </div>
          <div class="card-body">
            <a [href]="socialLinks.facebook" target="_blank" class="btn btn-outline-primary w-100 mb-2">
              <i class="bi bi-facebook me-2"></i>Facebook
            </a>
            <a [href]="socialLinks.twitter" target="_blank" class="btn btn-outline-info w-100 mb-2">
              <i class="bi bi-twitter me-2"></i>Twitter
            </a>
            <a [href]="socialLinks.instagram" target="_blank" class="btn btn-outline-danger w-100 mb-2">
              <i class="bi bi-instagram me-2"></i>Instagram
            </a>
            <a [href]="socialLinks.linkedin" target="_blank" class="btn btn-outline-primary w-100">
              <i class="bi bi-linkedin me-2"></i>LinkedIn
            </a>
          </div>
        </div>

      </div>

      <!-- Main Content (Tabs) -->
      <div class="col-lg-8">

        <!-- Nav Tabs -->
        <ul class="nav nav-tabs nav-fill mb-4" id="profileTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="properties-tab"
                    data-bs-toggle="tab" data-bs-target="#properties"
                    type="button" role="tab" aria-controls="properties" aria-selected="true">
              <i class="bi bi-house-fill me-2"></i>Properti Saya
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="favorites-tab"
                    data-bs-toggle="tab" data-bs-target="#favorites"
                    type="button" role="tab" aria-controls="favorites" aria-selected="false">
              <i class="bi bi-heart-fill me-2"></i>Favorit
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="history-tab"
                    data-bs-toggle="tab" data-bs-target="#history"
                    type="button" role="tab" aria-controls="history" aria-selected="false">
              <i class="bi bi-clock-history me-2"></i>Riwayat
            </button>
          </li>
        </ul>

        <!-- Tab Pane Content -->
        <div class="tab-content" id="profileTabsContent">

          <!-- Properti Saya Tab -->
          <div class="tab-pane fade show active" id="properties" role="tabpanel" aria-labelledby="properties-tab">
            <div class="row g-4">
              <div class="col-md-6" *ngFor="let p of properties">
                <div class="card h-100 shadow-sm border-0">
                  <div class="position-relative">
                    <img [src]="p.image" class="card-img-top" [alt]="p.title">
                    <span class="position-absolute top-0 end-0 m-3 badge bg-success">{{ p.status }}</span>
                  </div>
                  <div class="card-body d-flex flex-column">
                    <h5 class="card-title fw-bold">{{ p.title }}</h5>
                    <p class="text-muted mb-2">
                      <i class="bi bi-geo-alt-fill me-1"></i>{{ p.location }}
                    </p>
                    <div class="d-flex justify-content-between align-items-center mb-3">
                      <span class="text-primary fw-bold fs-5">Rp {{ p.price | number }}/bulan</span>
                    </div>
                    <div class="d-flex gap-3 mb-3">
                      <small><i class="bi bi-house me-1"></i>{{ p.bedrooms }} Kamar</small>
                      <small><i class="bi bi-droplet me-1"></i>{{ p.bathrooms }} Kamar Mandi</small>
                      <small><i class="bi bi-rulers me-1"></i>{{ p.area }} mÂ²</small>
                    </div>
                    <div class="mt-auto d-flex gap-2">
                      <button class="btn btn-sm btn-outline-primary flex-fill" (click)="onEditProperty(p.id)">
                        <i class="bi bi-pencil me-1"></i>Edit
                      </button>
                      <button class="btn btn-sm btn-outline-danger flex-fill" (click)="onDeleteProperty(p.id)">
                        <i class="bi bi-trash me-1"></i>Hapus
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Add New Property Card -->
              <div class="col-md-6">
                <div class="card h-100 shadow-sm border border-2 border-dashed text-center d-flex flex-column justify-content-center" style="border-color: #ddd;">
                  <i class="bi bi-plus-circle display-1 text-primary mb-3"></i>
                  <h5 class="mb-2">Tambah Properti Baru</h5>
                  <p class="text-muted mb-3">Daftarkan properti Anda dan mulai mendapatkan penyewa</p>
                  <button class="btn btn-primary">
                    <i class="bi bi-plus-lg me-2"></i>Tambah Properti
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Favorit Tab -->
          <div class="tab-pane fade" id="favorites" role="tabpanel" aria-labelledby="favorites-tab">
            <div class="row g-4">
              <div class="col-md-6" *ngFor="let f of favorites">
                <div class="card h-100 shadow-sm border-0">
                  <div class="position-relative">
                    <img [src]="f.image" class="card-img-top" [alt]="f.title">
                    <button class="position-absolute top-0 end-0 m-3 btn btn-sm btn-light rounded-circle">
                      <i class="bi bi-heart-fill text-danger"></i>
                    </button>
                  </div>
                  <div class="card-body d-flex flex-column">
                    <h5 class="card-title fw-bold">{{ f.title }}</h5>
                    <p class="text-muted mb-2">
                      <i class="bi bi-geo-alt-fill me-1"></i>{{ f.location }}
                    </p>
                    <div class="d-flex justify-content-between align-items-center mb-3">
                      <span class="text-primary fw-bold fs-5">Rp {{ f.price | number }}/bulan</span>
                      <div class="text-warning">
                        <i class="bi bi-star-fill"></i>
                        <span class="ms-1 text-dark fw-bold">{{ f.rating }}</span>
                      </div>
                    </div>
                    <button class="btn btn-primary mt-auto w-100">
                      <i class="bi bi-eye me-2"></i>Lihat Detail
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Riwayat Tab -->
          <div class="tab-pane fade" id="history" role="tabpanel" aria-labelledby="history-tab">
            <div class="card shadow-sm border-0">
              <div class="card-body">
                <div class="timeline">
                  <div *ngFor="let item of history" class="d-flex mb-4 pb-4 border-bottom position-relative">
                    <div class="flex-shrink-0 me-3">
                      <div [ngClass]="'bg-' + item.iconColor + ' bg-opacity-10 rounded-circle p-3'">
                        <i [class]="'bi ' + item.icon + ' text-' + item.iconColor + ' fs-4'"></i>
                      </div>
                    </div>
                    <div class="flex-grow-1">
                      <div class="d-flex justify-content-between align-items-start mb-2">
                        <div>
                          <h6 class="mb-1 fw-bold">{{ item.title }}</h6>
                          <p class="text-muted mb-1">{{ item.description }}</p>
                        </div>
                        <small class="text-muted">{{ item.time }}</small>
                      </div>
                      <span class="badge" [ngClass]="'bg-' + item.badgeColor">{{ item.badge }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div> <!-- end tab-content -->

      </div> <!-- end main content -->
    </div> <!-- end row -->
  </div> <!-- end container -->
</section>
